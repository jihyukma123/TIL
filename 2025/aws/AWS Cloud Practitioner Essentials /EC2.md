# EC2란?

가상화된 서버에 access하기 위해서 사용되는 서비스

aws에서는 너를 위해서 이미..

- 데이터센터 구축
- 데이터센터 보호
- 서버 구매
- 서버 설치

등 작업을 다 해줬음 이미.

이 엄청난 양의 서버 자원에서 내가 일부를 사용하고 싶으면..?

나한테 필요한 EC2 인스턴스를 설정하고 시작하면?

몇 분 만에 바로 서버를 띄울 수 있다는 점.

그리고 필요없어지면 손쉽게 제거할 수 있다.

참고로 가상화 기술을 사용해서, 하나의 호스트를 여러 인스턴스들이 공유하는 형태일 가능성이 높음.(가상머신)

호스트 머신 위에 실행된 하이퍼바이저가 각각 가상머신이 물리적인 리소스 공유할 수 있게 책임지고 있음.

`멀티 테넌시` - 가상머신들이 기본 하드웨어를 공유하는 것. 하이퍼바이저가 멀티 테넌시 환경을 구성하고 관리하는 책임을 지는 주체

리소스를 공유하지만, 인스턴스끼리는 서로 완전히 안전하게 독립되어 있다.

# 프로비저닝?

EC2 instance를 프로비저닝 한다 = EC2 인스턴스를 준비하고 설정해서 사용할 수 있는 상태로 만드는 것

운영체제/구성 등을 원하는 형태로 조합해서 비즈니스 니즈를 맞출 수 있음.

EC2의 리소스 크기만 조절할 수 있는게 아니라, EC2의 **네트워킹 측면의 제어**도 가능하다는 점.

해당 서버 자원에 대해서 접근제어가 가능하다는 점.

# EC2 인스턴스 유형

EC2 인스턴스는 한 명의 스타벅스 직원이라고 생각하면 됨.

보통 모든 직원이 커피를 만들지 않는다. 카운터 보는 사람, 청소하는 사람, 음료 만드는 사람, 창고 정리하는 사람 등등 역할을 분담해서 하나의 서비스, 즉 커피 매장이 굴러가게 함.

이를 위해서는 직원의 기술이 주어진 역할에 잘 부합하는지 확인하는 과정이 필요함.

이처럼 aws에서는 비즈니스 목적에 따라서 배포할 수 있는 다양한 유형의 EC2 인스턴스가 있음.

이를 인스턴스 패밀리라고 하며 5가지가 있다고 함

- 범용
  - 균형있는 리소스
  - 웹서버, 코드 리포지토리 등 다양한 목적 어느정도 커버 가능
- 컴퓨팅 최적화
  - 컴퓨팅 집약적 작업(게임 서버, 고성능 컴퓨팅 등)
- 메모리 최적화
  - 메모리 집약적 작업
- 액설러레이티드 컴퓨팅
  - 하드웨어 엑설러레이터 사용으로 부동소수점 계산, 그래픽 처리, 데이터 패턴 일치여부 확인, 머신러닝 모델 학습 등에 적합
- 스토리지 최적화
  - 데이터 웨어하우스 등 데이터를 빠르게 처리해야되는 케이스에 적합

요구되는 니즈에 따라서 적절한 인스턴스 선택이 필요하다.

# EC2 요금..?

1. 온디맨드 유형

사용한 기간만틈 사용한 양에 대해서 요금 지불

처음 사용 시 워크로드 테스트 위해서 사용

사전제약/허가 필요없음.

2. Savings Plan

선택약정 같은 느낌. 일정한 사용량을 약정하는 대신 보다 저렴한 요금 제공

잘 쓰면 요금을 72%까지 절약할 수 있다고 하는데....내가 봤을때는 그정도 아닐거같은데 ㅋㅋ

이 플랜은 EC2 뿐만 아니라 Fargate나 Lambda에도 적용가능하다고 함.

3. 예약 인스턴스

꾸준한 상태의 사용량 예측 가능할 때 적합. 최대 75프로까지 저렴한 요금을 사용할 수 있음.

4. 스팟 인스턴스

여분의 EC2 용량을 온디맨드 가격의 90프로까지 할인받을 수 있음.

다만 AWS가 언제든지 리소스를 필요에 따라서 회수할 수 있고, 미리 경고가 주어지며 다시 띄우면 됨...(아니 뭔가 이상한데..?)

워크로드에서 중단이 허용되는지 확인한 다음에 사용(예를 들어서 배치성 workload에 사용할 수 있겠지)

5. 전용 호스트

다른 사용자와 호스트 공유하지 않으며, 보안이 중요할 때 사용

제일 비쌈.(그렇겠지 전용인데)

# EC2의 확장성과 탄력성

크기를 조절하는 것에 대해서...

수직 확장이 있고 수평확장이 있음.

수직 확장은 성능을 추가하는 작업. 수직 확장의 구조적 한계 존재한다고 함. 처리 속도가 결국에는 느려져서 동시요청 처리가 어려워서 고객 요청 처리에 문제(장애)가 생김.
수평 확장은 여러 서버를 추가해서 동시에 처리할 수 있는 양을 늘리는 것. 인스턴스 추가가 이런 느낌임.

EC2는 변화하는 수요에 따라 맞춰서 인스턴스를 추가하거나 제거하는게 가능

2가지 접근법이 있다.

- 동적 조정: 수요 변화에 그때그때 대응
- 예측 조정: 예측된 수요에 따라 인스턴스를 자동으로 적절한 양으로 예약
