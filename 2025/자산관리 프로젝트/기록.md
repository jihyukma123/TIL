# 250802(토)

홈 화면 UI를 뽑으려고 웹검색, Lovable, v0.dev 등 방법을 좀 써봤음.

근데 내가 홈화면에 뭘 표시할지를 확실히 모르는 상태에서 뽑으려고 하다보니 잘 안됐다. (만들어놓고도 이게 맞나? 하는 생각이 계속 들었음.)

디자인이 마음에 들고 말고를 떠나서, 결과를 평가할 기준이 없었음.

그래서 오늘 배운 점은....내가 뭘 만들려고 하는지 최소한의 기준과 목표는 세우고 나서 작업을 진행하는게 좋다.

잘 모르겠으니까 일단 뭐라도 만들어달라고 하고 developing 해보자는 접근법은 진짜 아무것도 없을 때 시작하기는 좋은데, 일단 어느정도 방향성이 있는 상황에서는 오히려 진행이 더 늦어짐.

최소한의 기획은 도전해보자. 화면도 뭐가 어떤 화면에 표시되어야할지는 알고 나서 일을 키셔도 시키는게 나아보임.

# 250803(일)

asset 관련 api를 구현해보려고 한다.

그런데 그 전에 api endpoint를 어떻게 인가해주는지에 대해서 이해가 좀 필요할 것 같아서 공부를 좀 해보고자 했음.

FastAPI의 Depends를 이용해서 router함수에 전달되는 token을 검증하는 함수를 활용해서 처리하는 느낌은 알겠음.

근데 token에서 어떤 값을 분리해서 유저를 검증할 것인가에 대해서 고민이 생김(username을 사용하는 것으로 Copilot이 코드를 짰는데, 이게 맞나 싶음.)

username이 unique한 값으로 설정되어 있기는 한데...애초에 username을 따로 받아서 관리하는 서비스를 근래에 많이 못본것 같음.

그래서 email..? 별도의 user_id(UUID)..? 등에 대한 고민이 좀 필요함.

아니면 그냥 아싸리 google/naver/kakao 등 SNS login을 넣을까? 고민고민...

근래에 로그인한거보면 다 구글 로그인이었던 것 같긴해..
(카카오는 굳이 안하더라도..)

이와 관련해서 공신력 있는 글을 좀 찾아달라고 했는데 구글 클라우드 글이 있어서 좀 읽어보려고 함.

읽어보니...다음과 같은 액션 플랜이 생김(다 읽지는 않았지만..)

- 비밀번호는 salt를 추가해서 관리하도록 수정
- email, username 같은 부분정보를 가지고 유저를 식별하는 구조가 아니라, user_id 라는 이 시스템 안에서 global unique하게 사용되는 값을 사용해서 유저를 식별하도록 값 추가
- User테이블에 email, name, 써드파티 인증 정보 등 다 때려넣어서 저장하는게 아니라 테이블을 분리해서 처리

# 250823(목~토)

바이브코딩으로 개발하고, 코드를 이해하고, 필요한 부분을 공부해서 채우는 식으로 개발을 해보고 있음.

오늘은 자산 관련해서 CRUD API를 만들고, 자산 항목 탭을 만들어서 UI를 구현함.

배운 점

- DB의 commit/refresh/rollback/transaction 관련 공부
  - commit과 refresh를 하는 식으로 DB에 write/update하는 코드가 동작하는데 왜 이런 식으로 동작하는지 잘 모르고 있어서 알아봄.
  - commit -> 어딘가에 쌓여있는 DB변경 작업을 최종적으로 반영하는 작업. 특징은, 하나라도 실패하면 다 실패한다. 이런 예시가 이해에 도움이 많이 되었음. 계좌 이체 하는 케이스를 생각해보자. 내가 친구에게 만원을 이체하는 작업은, 내 계좌에서 만원을 빼고 친구 계좌에 만원을 넣는 작업을 같이 처리해야함. 내 계좌에서 돈을 빼는 작업을 성공했는데 친구에게 입금하는 처리가 실패했는데 그대로 빼는 작업을 유지하면? 돈이 사라짐..ㅠㅠ 단순한 케이스이지만 이런 식으로 안정성 측면에서 특정 작업은 묶어서 처리하면 도움이 됨.
- 그리고 묶어서 처리하면 rollback이 용이함. 단일 작업으로 처리하면 실패하면 또 일일이 취소하는 쿼리 돌려야하는데 커밋은 그냥 롤백해버리면됨.
- SQL 하나하나 단일 실행하면 디스크 I/O 비용이 커짐. -> 모아서 한 번에 처리하면 그 리소스를 아낄 수 있음.
- 일관성에도 도움이 됨. 중간 상태(출금은 됐는데 입금 되기 전)이 유저에게 노출되지 않음. 즉 출금입금이 같이 처리된 것처럼 최종 표시가 됨.
- 트랜잭션이라는 것은 일련의 SQL요청의 모음
