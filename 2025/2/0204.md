# UI를 업데이트 하는 방식에 대한 생각

프론트엔드+백엔드+DB로 구성된 기본적인 웹사이트에서 사용자가 웹페이지에서 특정 인터랙션을 했을 때, 그에 따라 DB데이터가 업데이트 된다면 업데이트 된 데이터를 어떤 방식으로 화면에 반영해야되는지에 대한 궁금증이 생겼다.

프론트엔드 코드 동작 -> 서버에 데이터 처리 요청 -> 서버가 DB에 필요한 데이터 처리 -> 처리 결과 반환 -> UI에 업데이트된 DB상태 반영

으로 진행되는 단계에서, 마지막의 `UI에 업데이트 된 DB상태 반영`이 어떻게 처리되는게 맞는지? 궁금증이 들었다.

1. 클라이언트는 클라이언트 상태를 요청이 잘 처리되었다는 서버의 응답을 믿고 Todo 목록에서 해당 Todo만 제거한다.(React state를 업데이트 한다던지..등등)
2. 클라이언트는 업데이트된 전체 Todo를 다시 서버에게 요청해서 DB상태를 받아서 렌더링 한다.

멘토님께 이에 대해서 물어봤는데, 1번은 Optimistic UI라는 키워드와 연관이 있었고, 2번은 React Query와 관련된 내용으로 Server State에 대해서 공부해보라고 추천해주셨음. 관련해서 전달해주신 아티클을 읽어보고 공부해보려고 한다.

그리고 chatGPT는 2가지 방법을 함께 사용하는 하이브리드 방식에 대해서도 알려줬다. 우선은 클라이언트 UI를 업데이트 하고, 필요한 순간이나 점차적으로 백엔드 데이터와 동기화하는 방식.

## Optimistic update가 필요한 시나리오가 존재하는가?

통상적으로는 서버에 요청을 보내고 응답을 기다리는 동안 로딩 관련 UI를 표시하는 등 UX를 통해서 사용자의 요청에 대해 바로바로 응답을 처리할 필요가 없다.

하지만 토글버튼 같은 경우, 사용자들이 즉각적인 피드백을 기대하는 UX 중 하나.

만약에 이런 것처럼 요구사항 때문에 로딩 UI 없이 바로 유저에게 결과를 표시해야되는 경우에 어떻게 해야하는가?

이런 시나리오들에서는 Optimistic Update 필요할 것.

## Optimistic Update

유저 경험을 향상시키기 위한 기술이다.

처리가 성공할 것이라고 가정하고 요청이 성공했을 때의 UI를 유저에게 표시하는 것.

그러면 실패하면 어떻게 하는가?
통상적으로 유저에게 실패를 알린 후, 다시 UI를 롤백하는 식으로 동작한다.

## Optimistic Update를 적용가능한 수치가 존재하는지?

Request에 대한 서버의 응답 성공률이 어느정도일 때 적용해도 될지에 대해서 궁금해서 chatGPT에게 물어보았더니

99프로 이상이면 걱정없이 도입 가능 / 95~99퍼센트는 robust한 rollback handling과 함께 사용 / 95퍼센트 이하는 적용시 얻는 이점보다 잃는게 더 많다는 답변을 받았다.

그리고 이런 사항들을 고려해야 한다고 한다.

- Error handling -> 적절하게 에러핸들링이 되는지? UI를 되돌리고 유저에게 inform하는 것이 용이한지?
- 수행되는 작업의 종류 -> 정적 블로그 글 불러오기 등 작업은 상대적으로 optimistic update를 적용하기 안전한 반면, 중요한 정보의 저장(금전거래 등)의 경우 보다 확실한 방법을 선택해야 함.
- 네트워크 안정성.

음 결국 케바케, 프바프 등등 그때 기준에 따라서 적절한 결정을 내려야한다는 것 같다.

- 근데 request 성공률은 어떻게 측정하는지?
- 애초에 네트워크 연결이 없는 상태가 아닌지 미리 확인하는게 가능한지?(애초에 네트워크에 연결 자체가 갑자기 안된 상황에서 서버에 요청을 보내지도 않았는데 처리되면 이상하니까) 네트워크 연결 있어? -> 이후에 서버 요청 기다리는 방식이 되는지?

## 네트워크 안정성과 관련해셔...

웹 프론트엔드에서 연결된 네트워크의 평균적인 속도를 알 수 있는지? 알 수 있다면 그에 따라서 필요한 처리를 할 수 도 있을 듯(좀 specific하기는 한데, 그래도 관련해서 공부하다가 보면, 네트워크 속도가 빠르다/느리다가 어떤 의미인지? 어떻게 측정하는지? 네트워크 속도가빠르면 곧 웹페이지 속도가 빠른지? 어떤 요소들이 영향을 주는지 등을 공부를 같이 해보면 좋을 것 같음.)

# '어떤 사용자 경험을 제공하고자 하는가'도 중요한 기술 선택 기준이다.

앞서 내가 궁금했던 2가지 방법 중에서, 멘토님은 유저에게 실시간 경험을 제공하는 것이 중요하다면 1번, 아니면 2번의 방법을 선택한다고 하심.

'실사간성 경험을 제공하는 것이 중요하다면'이라는 부분에서 다음과 같은 생각이 이어졌다.

사용자에게 어떤 경험을 제공하고자 하는가? -> 기술 선택에 있어서 하나의 중요한 기준이지 않을까.

기술적인 측면을 고려하는 것도 중요하지만, 개발자는 결국 `가치`를 만들어내야한다는 관점에서는 사용자에게 제공하고자 하는 경험을 토대로 기술을 선택하는 것도 매주 중요하다는 생각이 든다.

Tanstack Query가 대세이고 많은 프로젝트들이 이를 채용하지만, 상황에 따라서 적용하지 않는게 나을 수도 있다는 점... 생각해볼만한 문제다.

이런 생각을 하다보면, 결국 `어떤 문제를 해결하고자 하는가`를 제대로 파악한 상태에서 문제를 해결하는게 중요하다는 생각으로 이어진다. 근본적인 부분이랄까...

해결하고자 하는 문제를 해결하는 기술을 활용해야 한다. 그러기 위해서는 기술들의 표면적 사용법보다 더 아래에 있는, 기술이 어떤 문제를 해결하고자 등장했는지, 그 문제를 실제로 해결하는지, 문제는 어떤 기술적 부분과 연관되어 있는지 이해할 수 있는 직관과 경험 그리고 지식이 종합적으로 필요한 것 같음.
