# ORM

ORM이란?

piece of software. 즉 소프트웨어임. 프로그램이다 이거지.

뭘하기 위한 소프트웨어야?

DB에서 사용하는 데이터 표현 방식과, 객체지향 프로그래밍에서 사용하는 데이터 표현방식을 소통가능하게 해주기 위한 소프트웨어.

DB방식과 OOP방식은 데이터를 다루는데 있어서 차이가 존재하는데, ORM은 이 gap을 bridge하기 위한 기술임. 서로 다른 시스템 간 데이터 디자인 차이를 메꾸기 위해서.

개발자의 관점에서 보면, ORM은 마치 사용하는 언어의 자료구조를 사용하는 것처럼 DB데이터를 사용할 수 있게 해주는 메커니즘을 제공.

ORM이 제공하고자 하는 바는, SQL같은 언어를 배우거나 특별히 새롭게 뭔가를 배우지 않아도 데이터를 생산적으로 잘 다룰 수 있게 해주고자 하는 것.

Application과 DB 사이의 추상화 계층임. Aims to increase developer productivity by removing the need for boilerplate code.

AIMS TO INCRESE DEVELOPER PRODUCTIVITY

근데 이게 좀 좋게 표현한거고, 그냥 백엔드 개발자들이 DB다루는거 말고 재밌는 백엔드 로직 코드 짜고 싶다 이거 아닌가? ㅋㅋㅋ 그런 느낌이네...frontend 개발자들이 CSS피하는거랑 좀 비슷한 느낌인가? 왠지 그런 느낌...

## 너는 ORM이 필요할까??

`도구`라는 점이 중요함. 모든 도구가 그렇듯이 만능이 아니다. 트레이드오프가 존재하는데 잃는게 너한테 많이 해가 된다면 좋지 않은 선택이겠지.

일반적으로 언제 사용하면 좋으냐?

-> 많은 상태를 다루기 위해서 사용하는 언어의 `객체 지향적 기능`들을 많이 사용하는 경우.

## ORM 왜 쓰는가?

ORM을 쓰는 이유는, 개발의 속도와 생산성과 관련이 있다고 함.

개발을 빠르게 하는게 더욱 중요해졌는데, ORM은 개발자가 원시 SQL 쿼리를 작성하는 대신 객체지향 프로그래밍 개념을 사용해서 DB와 상호작용할 수 있도록 하는 프로그래밍 기술.

DB테이블을 클래스에 매핑하고, row를 프로그래밍 언어의 개체에 매핑한다.

## ORM의 장점

- 추상화: DB와의 상호작용을 단순화하는 추상화를 제공해서, 개발자는 SQL쿼리 대신 클래스 및 개체로 작업할 수 있어 코드 쓰기가 더 편함
- boilerplate 감소: DB작업을 ORM이 처리하기 때문에 반복코드제거
- 이식성: 코드 변경 최소화하면서 DB변경이 가능함.
- 생산성: SQL 쿼리 신경 덜쓰고 비즈니스 로직에 집중 가능

## DBA가 ORM을 싫어하는 이유

DBA들이 싫어하는 이유라고 써놨지만, ORM 기술이 가지는 downside라는 측면에서 해석할 수도 있을 것 같음.

- 성능 문제: 신경써서 작성된 쿼리에 비해서 ORM이 생성한 쿼리는 효율이 떨어질 수 있음.
- 제어력 상실: ORM이 추상화시켜서 대신 처리해줘서 감춰지는 부분들은 커스터마이징이 필요해도 건드리기 어려울 수 있음. 즉 세밀한 최적화가 어렵다는 뜻.
- 복잡성: ORM은 DBA 입장에서는 DB상호작용과 관련된 문제를 이해하고 문제 해결하는 것에 어려움을 추가.
- DB설계가 적절하지 않을 수 있음: ORM은 객체지향적 관점에 집중할 수 있도록 해주는 기술이기 때문에, 최적의 데이터베이스 설계하는데 있어서 필요한 점들이 고려되지 않을 수 있음(DB의 관점보다는 객체지향적 관점, 클래스, 스키마, 객체 등의 관점에서만 보게 될 수 있음.)
- DB문제가 explicit하지 않음: ORM이 DB작업의 복잡성을 많이 추상화시켜버려서 개발자들이 잠재적인 문제나 모범 사례에 대해서 인식하지 못할 수 있음. 근데 문제는 보통 바로 보이지 않는다는게 좀 어려운 점이라고 함. 프로그램에 부하가 걸리는 시점부터 이런 저런 문제가 생기기 시작하니까.

## 일을 잘한다는 것에 대한 첨언..?

`결국 일을 잘한다는 건 커뮤니케이션을 잘하고, 타협점을 잘 찾고, 빠르고 안정적으로 성능을 끌어낼 수 있는 합의점을 찾는 것이 아닐까? 싶네요.`

- 커뮤니케이션을 잘한다 -> 지금 시점에서 내가 생각하는 것은 궁금해하기 전에 먼저 말을 한다... 정도..?
- 생각해볼법 하다. 목표달성에 도움이 되는 커뮤니케이션이 뭘까? 일단 그걸 알려면 목표를 명확하게 알아야 하고, 목표에 대해서 모르겠다면 그것조차 질문을 통해서 상호 싱크가 맞아야 한다.

## 입장 차이라는게 다 존재하겠구나.

DBA의 입장과 개발자의 입장. 서로 추구하는 것이 달라서 대립하는 지점들이 발생하는데, 적절한 소통을 통해서 목표에 가까워 질 수 있는 방향으로의 문제 해결이 필요할 것 같다.

그러려면 또 중요하다고 생각되는게, 상대방의 문제를 이해하는 것. DBA정도의 전문성은 아니더라도, 이 사람이 어떤 어려움을 주장하는지에 대해서 알려면 어느정도의 관련된 지식을 나도 가지고 있어야 한다. IT에서 일한다는 것은 결국 FE, BE로 구분되는게 아니지 않을까 하는 생각이 많이 들기도 한다.

FE,BE 다 중요한데 깊이만큼이나 서비스를 완성하는데 필요한 기술들 전반에 대해서 이해하고 있어야 하는 것 같음. WHY에 대한 생각. 이걸 왜 쓸까. 이건 여기서 왜 이렇게 쓸까 등등...

**참고자료**

- [개발자들이 ORM을 쓰는 이유](https://rastalion.dev/%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%93%A4%EC%9D%B4-orm%EC%9D%84-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0%EC%99%80-dba%EA%B0%80-orm%EC%9D%84-%EC%8B%AB%EC%96%B4%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0/)

- [What is an ORM?](https://www.prisma.io/dataguide/types/relational/what-is-an-orm)
