# 랭체인 실습해보기

랭체인을 공부하기 위해서 강의를 듣다가, 간단한 Agent를 만들어보는건 강의보다 직접 만들어보는게 낫겠다는 생각이 들었다.

# 뭘 만들까

조금 고민을 해보다가, 근래에 느끼는 pain point를 좀 보완해줄 수 있는 Agent를 만들어보려고 한다.

깃허브에 마크다운 형식으로 공부한 내용들을 정리하고 있는데, 사실 조금만 지나도 정리했던 내용들이 기억이 나지 않는다.

그래서 일단 처음 해보고 싶은 것은,

존재하는 문서를 기반으로 전체적으로 어떤 문서들이 존재하는지 뽑아보고 싶음.

그리고 내 관심사가 뭔지, 나는 어떤 성향의 사람이라고 보여지는지 LLM을 통해서 한 번 뽑아보고 싶음.

렛츠고.

# 어떻게??

일단 랭체인 쓰고, LLM은 AWS Bedrock에서 Claude 4 Sonnet 모델 가져와서 사용할 예정.

그리고 Github Tool을 이용하는 Agent를 활용해서 내 TIL 리포지토리에서 데이터를 가져와서 LLM에 먹여서 정리를 해보는게 목표.

# 작업 순서..?

1. 깃허브 Tool을 통해서 가져올 수 있는 정보를 확인해보자.

방법과 가져올 수 있는 정보가 어떤 것인지.

깃허브 Tool을 사용하려면 Github App을 생성하고 APP_ID와 PRIVATE_KEY를 생성해서 `GitHubAPIWrapper`생성 시 같이 넣어줘야 한다.

그래서 이걸 토대로 사용할 수 있는 Tool들을 뽑아내야 함.

여러 가지 도구들이 잘 조회되는 것을 확인했음.

2. Agent 설정

찾아보니까 공식문서에서 제공하는 `create_react_agent`는 랭그래프 기능이라서 우선 설치함.

tool을 생성하고, 사용할 model을 생성하고, `create_react_agent`에 두 인자를 전달해서 질의를 보내보았음.

일단 응답이 오긴 하는데....문제는 트리 형태로 뭔가를 좀 뽑아달라고 했더니 잘 안된다.

"이렇게 현재 저장소에 있는 모든 파일의 경로와 제목을 재귀적인 트리 구조로 보여드렸습니다. 원하시는 정보를 얻으셨나요?" 라고 응답을 주긴하는데 문제는 트리가 같이 응답으로 안온다.

왜지...

일단 그걸 하기 전에, 간략하게 메타데이터 부터 조회되는지 한 번 보고자 다음 질문을 했고 그에 대한 응답이다.

Q: 지금 연결된 깃허브 저장소의 메타데이터를 알려줘
A: 위에서 나열된 파일들은 이 저장소의 최신 커밋 시점에서 메인 브랜치에 포함된 모든 파일들입니다. 총 220개의 파일들이 존재하며, 대부분은 작년 2024년과 올해인 2025년에 작성된 마크다운(md) 파일들로 구성되어 있습니다.

이 파일들은 제 일상적인 학습 내용이나 개발 프로젝트, 독서 노트 등을 정리한 문서들로 보입니다. 예를 들면 AI 관련 주제, 자바스크립트 및 리액트 공부 내용, 서버 관련 주제 등이 포함되어 있는 것 같습니다.

전반적으로 이 저장소는 제가 평소에 개인적으로 학습하고 기록한 내용들을 모아둔 곳으로 보입니다. 필요에 따라 특정 디렉토리나 파일을 더 자세히 살펴보시면 구체적인 내용을 확인하실 수 있을 것 같습니다.

오호 그래도 분명히 TIL repository 내용을 보고 분석하고 있는 것 같긴 하다.

근데 정확한 tool을 호출하고 있는지 등을 모르겠어서 이런 걸 좀 추적할 수 있는지 여부랑, 내가 원하는 기능을 구현하기 위해서 좀 더 기능 동작을 명시적으로 컨트롤 하는 부분을 이어서 구현해봐야한다.

# 원하는 목표가 뭐지??

우선 Agent 가 내부적으로 어떻게 동작하는지 이해를 좀 할 수 있으면 좋겠음.

지금은 그냥 Agent의 invoke 함수 호출하면 그에 따라서 black box 형식으로 알아서 특정 github toolkit에 존재하는 tool 하나를 선택해서 진행하는 느낌임.

# create_react_agent 가 어떤 작업을 수행하는지부터 알아보자.

결국 이걸 알고 싶은 이유는, 디버깅이 목적이다. 질의를 했을 때 LLM이 어떤 도구를 선택하는지 알고 싶었음.

그러면 디버깅을 하기 위해서 어떤 방법들이 존재하는지부터 알아보는게 좋겠다는 생각이 들었다.

유데미 강의를 보니까, LangSmith라는 도구를 활용해볼 수 있다고 한다.

LangSmith 연동해서 API KEY와 TRACING 설정하고 만들었던 Github Agent를 한 번 실행해보니 엄청 간단하게 logging이 된다..!!!

오 이거 참 편리하군.

회사 프로젝트에서 이게 가능할지는 좀 봐야겠지만, 일단 지금 공부하는 과정에서 확인해보기에는 참 편리하다.

create_react_agent를 통해서 생성된 Agent는 ReAct Agent임

즉 `React + Act` 패턴으로 동작한다는 거임.

LLM이 추론을 통해서 다음 행동을 생각하고, 필요하다고 판단되면 도구를 호출하는 등 처리를 하는 구조.

# 근데 이게 디버깅의 전부인가..?

모르겠지만, 일단 그래도 몇 가지는 좀 이해했다.

1. LangGraph의 create_react_agent에 tool과 model을 전달해서 질의를 ReAct Agent 가 처리하는 구조를 만들 수 있다.
2. 1번의 Agent가 어떤 순서로 작업을 수행하는지 보기 위해서 LangSmith를 사용해볼 수 있다.

다음 번에는 LangSmith Studio도 같이 사용해보면 좋을 것 같음.

그리고 이런 구조의 소프트웨어가 기존의 구조와 뭐가 다른지, 그리고 Agentic하게 돌아가는 과정에서 어떤 부분을 autonomous 하게 하고 어떤 부분을 human in the loop이나 기타 구조로 좀 보완할지 같은 부분에 대해서도 생각이 필요한 것 같음.
