# 서버 클라이언트 연결에 대해서 공부하다보니 Nginx와 FastAPI의 차이가 뭔지 궁금해져서 gemini한테 물어봄

일단 이거 왜 공부함?

왜냐하면 내가 지금 하고 있는 일이거든...

매일매일 로컬에서 FE/BE앱 띄워서 서로 소통시켜가면서 프로그램을 개발하는데, under the hood 무슨 일이 발생하는지 모름..

## 공부하기전의 나..

어떤 측면에서 모르는가?

FE -> BE로 요청이 전송되고, 처리해서 반환되는건 알겠음. 근데 FE -> BE로 가는 과정에 거치는 구성 요소들에 대해서 잘 모름

- WAS?
- nginx?
  - reverse proxy?
- fastapi와 uvicorn

정확히 뭔지 잘 모르겠다!!

모르면 알아봐야지.

## 일단 흐름

FE -> 웹 서버(Nginx) -> WAS(uvicorn + fastapi) 이런 흐름이라고 함..

각 요소는 어떤 역할 수행하는지?

## Web Server 와 WAS

일단 웹서버/WAS의 개념과 차이점 공부하기 전에 알아야 하는 내용은, 서로 수행할 수 있는 역할이 좀 겹치는 부분이 있다는 거임(이분법적으로 생각하면 놓칠 수 있음) WAS는 웹서버가 수행하는 역할을 대부분 할 수 있음. 다만 설계적으로 이유가 있으니까 서로 다른 역할을 부여해서 분리했겠지?? 너무 분리해서 생각하면 오히려 어렵다. 개발자가 구성하기 나름인 부분들도 좀 있고... 상황에 맞춰서 구성하면 되는 것 같음.

Nginx, Apache 같은 웹서버 프로그램을 돌리고 있는 컴퓨터임 그냥.

- 들고있는 리소스 요청받으면 바로 반환함.
  - 보통 정적인 리소스(html, 이미지 등)을 들고 있다가 웹서버 단에서 바로 반환한다.
- 동적인 요청(API 호출)이 들어왔을 때, 웹서버 자체적으로 처리하는 로직이 없으니까 WAS에게 요청함.

WAS는?(Application Server)

- 일단 얘는 웹서버가 하는 역할 대부분은 수행 가능하긴함.(가능은 하다.)
- 비즈니스 로직을 실행할 수 있음(실행할 수 있는 프로그램임) -> 서버사이드에서 코드를 실행할 수 있기 때문에 사용자에게 동적인 컨텐츠 전달이 가능함. 통상적으로 DB서버와 연계해서 로직처리

그러면 왜 WAS만 안씀?

- WAS가 동적인 로직을 처리하는데 집중할 수 있게 해주고 싶은거임.
  - 단순한 정적 컨텐츠 반환하는 역할을 웹서버에 맡겨두고, 기능 분리를 통해 서버 부하 방지하는 역할

아 그래서 아키텍처 상에서 보면 웹서버가 client와 WAS사이에 있구나. 판단을 웹서버에 맡겨두고, 필요할 때만(동적인 요청일때만) WAS 호출하려고.

부하 분산 역할도 있지만, WAS 앞에 하나의 레이어를 두는 구조를 통해서 장애 극복 기능도 처리할 수 있음.

- WAS에 문제가 발생했을 때 앞단에서 차단해준다던지 하는..

이런 느낌으로 이해되기도 해.

개발자가 생각했을 때, WAS의 부담을 최대한 덜어내고 싶으면 웹서버상에서 이것저것 로직을 처리할 수도 있고, 아니면 최소한도로 처리하고 WAS로 많이 넘겨줄수도 있고...재량임 그냥 어떤 처리를 어디서 할지는 다만 부하분산 역할분리 측면에서 최대한 동적 로직 처리라는 역할에 집중할 수 있게 해주고 싶을듯? 가용성과 성능과 직결될 가능성이 높아서...
