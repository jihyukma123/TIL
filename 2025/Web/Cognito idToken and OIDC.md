# Cognito idToken 이란??

FE에서 바로 Cognito로 요청을 보내서 인증하는 구조에서, FE는 BE로 인증 요청을 보내고 BE에서 Cognito로 인증 요청을 보내서 처리하는 구조로 변경하는 작업이 필요함.

그래서 Cognito의 idToken이라는 것이 수행하는 역할에 대해서 알아보고자 한다.

# idToken이 뭐야?

AWS Cognito에서 유저가 성공적으로 로그인한 경우 발행해주는 JWT.

OAuth2.0을 따르는 OIDC(OpenID Connect) 프로토콜을 사용하여 인증 정보를 포함하고 있다.

idToken의 핵심적인 역할은 Client Application에게 사용자의 인증 정보를 제공하는 것(`claim`이라고 하는 일련의 사용자 정보를 담고 있음. 예를 들어서 유저네임, 이메일 등등)

AccessToken은 말그대로 리소스에 접근할 권한이 있는지 여부를 관리하는 토큰.

backend로 이동하게 되면 accessToken을 validate 해서 리소스 접근 가능 여부를 판단해주면 된다.

참고로 JWT Validation은 라이브러리를 사용하는게 좋다고 함. PyJWT나 같은 미리 잘 만들어진 라이브러리 사용하는게 좋다고 함.

# 근데 Cognito 사용자 Pool 생성 시 앱 유형을 선택하도록 되어있는데..?

백엔드 서버에서 인증을 처리하는 경우, 기밀 클라이언트로 변경되어야 한다...?

SPA에서 바로 인증하는 경우는 퍼블릭 클라이언트라고 함.

# 인증과 인가

인증 - 사용자가 누구인지 확인하는 과정.
인가 - 사용자가 특정 리소스에 접근할 수 있는 권한이 있는지 확인하는 과정.

# IDaaS

Cognito는 IDaaS(Identity as a Service)로, 사용자 인증 및 인가를 관리하는 서비스이다.

직접 구현하려고 하면 꽤나 까다롭고 리소스가 많이 드는데, 또 서비스 전반에 걸쳐서 영향이 있는 로직이기 때문에 쉽게 레거시가 되어서 부채가 될 수 있음.

그래서 이런 개발 리소스나 보안 측면이나 사용성을 고려해서 IDaaS를 사용하는 것이 도움이 될 수 있음.
