# 1장의 질문 답변 및 내용 정리

windsurf를 활용해서 문답을 하면서 공부를 해봤음.

# 리액트를 만들게 된 동기가 무엇인가요?

웹이 빠르게 발전하면서, 좋은 UX를 제공하려는 니즈가 강해짐. 그를 위해 웹이 '즉각적인' 느낌을 주길 바랬고, 쾌적하게 동작하길 바랬음.

근데 기존에 웹을 만들던 방식으로는 즉각적인 업데이트를 `대규모로` 수행하기에 몇 가지 어려움들이 있었다.

[성능 문제] 기존에는 웹페이지를 업데이트 할 때 전체 페이지 레이아웃을 다시 계산해서(reflow) 그렸기 때문에 성능 이슈가 존재했다.

[신뢰성 문제]또한 여기저기서 사용되는 상태값을 일관되게 유지하는 것이 어려웠음.

[보안 문제] 개발자가 XSS나 CSRF 같은 문제를 방지하기 위해서 JavaScript code sanitizing을 수행해야했음.

근데 사실 이것저것 차치하고, 가장 핵심적인 이유는 `application의 상태와 그에 따른 UI를 안정적이고 효율적으로 업데이트 해서 좋은 UX를 제공하기 위해서`.

그러면 기존의 vanilla JS를 활용하는 방식은 어떤 점에서 문제가 있었는지?

**human error의 여지가 많다**

단적으로 addEventListener를 removeEventListener로 제거하지 않으면 누적되어서 문제가 생길 수 있음.

**예측이 불가함**

vanilla JavaScript에서는 기존 element에 의존해서 새로운 element를 추가하는 경우들이 있는데, 이는 DOM을 완성시키기 위해서 JavaScript와 HTML이 상호의존성을 가진다는 뜻이다.

ul요소 안에 li요소가 있는 상황을 생각해보자.

vanilla JavaScript를 사용해서 이 목록을 업데이트 하려면, 먼저 데이터를 업데이트하고 업데이트된 데이터를 기준으로 목록을 업데이트 하기 위해서는 ul요소를 JavaScript에서 참조한 다음에 li요소를 더해주는 형식으로 DOM을 업데이트 해야한다.

JavaScript는 새로운 요소를 추가하기 위해서 기존에 존재하는 ul요소에 대한 참조가 필요하고, HTML도 새로운 요소를 등장시키기 위해서 JavaScript에서 작업이 필요한 상호 의존적인 관계가 됨.

이는 어느 한 부분이 빠그라지면 다른 하나도 영향을 받는, 2가지 변수가 존재하는 구조가 되어 프로그램의 안정성을 보장하기 어렵게 됨.

**비효율적**

개발자가 작성한 코드에 따라서 DOM업데이트가 비효율적으로 진행될 수 있음. 브라우저에서 DOM을 다시 그리는 것은 비싼 computation인데, 이것이 많이 반복되는 것이 성능에 좋지 않다.

특히 웹개발자로서 우리는 사용자가 모두 가장 최신의 컴퓨터나, 빵빵한 네트워크를 사용하고 있지 않을 가능성을 고려해야 한다.

이런 문제들 때문에,

- 유지 보수가 용이하고,
- 재사용 가능하며
- 예측 가능한 방식을 기반으로

대규모 코드베이스를 구축하는 것은 굉장히 어려운 과제였음.

# 리액트가 MVC와 MVVM 같은 이전 패턴보다 개선된 점은 무엇인가요?

결국 단방향 데이터 흐름임. 데이터 소유권이 더욱 제한되어, 그 상태가 필요한 컴포넌트가 그 상태를 소유하는 형태가 되었다.

# 플럭스 아키텍처의 특징은 무엇인가요??

플럭스 -> 클라이언트 측 웹 애플리케이션 구축을 위한 아키텍처 디자인 패턴

특징 몇 가지

- single source of truth: store라는 SSOT에 상태값이 저장되는 것이 중요함.
- 테스트가 용이함: store, dispatcher, action, view로 명확하게 역할이 구분된 요소들로 구성해 각 요소를 나눠서 테스트하기 좋음.
- separation of concerns: 각 요소별로 역할을 명확하게 구분해서 관심사 분리가 잘 되어있음.

# 선언적 프로그래밍 추상화의 단점은 무엇인가요?

내부 동작에 대해서 프로그래머가 직접 제어하기 어려워서, 커스터마이징이나 성능 최적화 등 작업이 어려울 수 있다.

# 효율적인 UI 업데이트를 위한 가상 DOM의 역할은 무엇인가요?

컴포넌트의 변경사항을 보다 적은 비용으로 추적해, 비싼 작업인 DOM업데이트가 최대한 필요할 때만 이루어지도록 한다.

# 2장 JSX

## JSX란 무엇이며, 장단점은 무엇입니까?

JSX란 JavaScript의 확장 문법이다.

개발자가 JavaScript내에서 HTML과 비슷한 코드를 작성할 수 있게 해줌.

컴파일러나 트랜스파일러에 의해 일반 JavaScript 코드로 변환된다.

장점은

- HTML에 익숙한 사람은 비교적 편하게 적응해서 사용 가능
- sanitization 작업이 내부적으로 처리되어서 보안적인 측면에서 HTML에 비해서 개선
- TypeScript, JSDoc, propTypes 등 기능을 통해서 타입 안정성 개선
- JSX를 통해서 컴포넌트 기반 사고를 통해 코드를 모듈화하는게 용이함
- JSX는 현재 비단 React 뿐만 아니라 웹개발 프레임워크/라이브러리들 전반에서 많이 사용됨.

단점은

- learning curve
- JSX텍스트로 작성된 코드를 JavaScript 로 변환하는 과정이 필요함.
- HTML + JavaScript, 즉 UI와 logic이 혼합되어 관심사 분리 측면에서 좋지 않다.
- JavaScript 표현식만 사용가능하기 때문에 이에 대한 개발자의 인지 및 경험이 필요함.

## JSX와 HTML의 차이점은 무엇인가요?

- {}를 활용해 JavaScript 표현식 삽입 가능

## 텍스트 문자열은 어떻게 기계어가 되나요?

JavaScript 코드인 텍스트 문자열은, 컴파일러를 통해서 기계가 해석할 수 있는 기계어로 변환된다.

토큰화 -> 구문 분석 -> 코드 생성 과정을 거쳐서 생성됨.

토큰화 과정을 통해서 텍스트 문자열을 특정한 토큰으로 변환한다.(변수 이름, 객체 등 주요 토큰을 기반으로)

구문분석은 토큰을 가져와서 구문 트리라는 코드 구조를 나타내는 자료구조(JSON 객체)로 만드는 과정.

구문분석 단계를 통해서 생성된 구문트리를 기반으로 코드 생성 과정에서 기계어를 생성한다.

## JSX 표현식이란 무엇이며 어떤 좋은 점이 있나요?

JSX로 작성한 엘리먼트 트리 내에서 JavaScript코드를 작성할 수 있는 방법.

HTML트리 안에서 조건부 렌더링 등, 보다 선언적으로 로직과 UI가 결합된 코드를 작성할 수 있어 이해하기 쉽고 유지보수가 더 쉬운 코드를 작성할 수 있다.

결국 React를 사용해서 개발할 때, 선언적으로 코드를 작성할 수 있게 해주는 강력한 도구이며, HTML과 문법이 유사하기 때문에 기존 웹개발자들 입장에서 가독성이 좋으면서도, JavaScript와 마크업을 통합해서 코드를 작성해서 동적인 UI를 선언적으로 보다 수월하게 개발할 수 있도록 해주는 강력한 아이디어.

# 3장 DOM과 VDOM

DOM을 직접 제어하고 관리하는 것은 복잡하고 error prone한 작업이다. React는 이 문제를 가상DOM이라는 컨셉을 통해서 해결함.

DOM은 거대한 JavaScript 객체로, 웹페이지의 상태를 실시간으로 표시한 것이라서 사용자의 상호작용과 함께 계속 업데이트 된다.

JavaScript를 활용해서 HTML을 업데이트 하는 방법은 document API의 `querySelector`, `getElementById`와 같은 함수를 사용한 것.

근데 DOM이 JavaScript 객체이기 때문에, 선택된 요소를 찾기 위해서는 이 DOM을 탐색하면서 일치하는 값을 찾아야 한다.

객체의 크기가 크면 자연스럽게 탐색 속도에 이슈가 생길 수 있음.

기존 DOM만을 사용해서 웹을 개발하는 경우, 성능/브라우저 간 호환성 등 문제가 존재함.

기존에는 브라우저마다 조금씩 지원하는 엘리먼트와 속성의 차이가 존재해, 이를 감안해서 코드를 작성해야 했다.

React는 이 문제를 `SyntheticEvent`라는 기본 브라우저 이벤트를 둘러싼 객체로 해결한다. Event와 상호작용하는 일관된 인터페이스를 통해서 개발자가 브라우저별로 별도의 코드를 작성할 필요가 없어짐. 즉 안정적인 이벤트 처리 시스템을 제공해서 비일관성을 보완해준다. 이는 가상DOM을 활용해서 React가 제공하는 수 많은 이점 중 하나일 뿐.

## 문서 조각

문서 조각이라는 개념이 있는데, 이는 DOM 노드를 저장하는 가벼운 컨테이너이다.

기본 DOM에 영향을 주지 않으면서 DOM에 가해지는 업데이트를 임시 저장하는 저장소같은 역할을 수행한다.

여기에 업데이트를 쌓아서 필요한 시점에 한 번만 실제 DOM에 반영하는 방법으로 리플로와 리페인팅을 한 번씩만 발생시킨다.

말 그대로 가벼운 컨테이너이기 때문에 이에 따른 이점이 몇 가지 존재한다.

- 일괄 업데이트 -> 컨테이너 안에서 얼마나 자주 업데이트가 이루어졌는지와 관계없이 실제 리플로와 리페인팅은 한 번만 수행
- 문서 조각에 추가된 노드는 실제 DOM에서 제거된다고 함. -> 큰 영역을 처리할 때 메모리 효율에 도움이 됨

React도 가상DOM을 활용해서 문서 조각과 비슷한 목적을 달성하고자 한다.

- 변화가 발생하면 바로 DOM에 반영하는 것이 아니라 VDOM에 먼저 반영해서 업데이트 횟수를 최소화하고,
- 변경사항이 다 적용되고 난 이후에는 가상 DOM과 실제 DOM을 효율적인 알고리즘을 활용해서 비교해서 최소한의 부분만 변경되도록 함.

문서 조각은 실제 DOM에 적용되어야 하는 변경사항을 몇 가지 뭉쳐서 반영함으로써 최적화하고, React의 가상DOM은 더 나아가서 애플리케이션 UI 전반에 걸쳐서 가상DOM(Tobe)과 실제 DOM(ASIS) 간 차이를 영리하게 알고리즘을 통해서 파악해서 일괄적으로 처리하는 보다 업그레이드된 최적화를 통해 렌더링 효율성을 극대화하고자 함.
