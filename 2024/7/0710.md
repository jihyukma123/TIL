# 안드 폰트 적용하기 위해서 시도하는 과정에서 배운 점

안드 전역으로 폰트 적용을 시도했는데, 폰트가 이상하게 잘리는 이슈가 있었다.

그래서 혹시 해당 폰트 이슈인가 해서 여러 폰트를 테스트했는데, 잘리는 이슈 자체는 동일했다.

이유를 찾고자 이런 저런 검색도 해봤는데 나오는게 잘 없었다.

그래서 폰트의 width를 측정해봤는데 재밌는 사실을 발견함.

폰트 자체는 커스텀 폰트인데, RN의 Text컴포넌트 레이아웃 계산은 시스템 폰트(안드 설정에서 적용한 시스템 폰트) 기준으로 된다.

그래서 커스텀 폰트에서 특정 텍스트를 렌더링 할 때 필요한 width 가 30이라고 하면, 해당 텍스트를 렌더링할 때 width가 30보다 작은 값으로 계산되는 폰트가 시스템 폰트로 설정되는 경우 폰트가 잘린다.(잘리는 것처럼 보이지만 글자가 줄바꿈 처리되어있다.)

React Native에서 레이아웃을 계산할 때, fontFamily를 명시하지 않으면 시스템 폰트를 기준으로 레이아웃 계산이 이루어지는 것이 아닌가 추측된다.

# 간단한 에러 parser를 만들면서 느낀 점

1. 미리 했으면 좋았겠다. 생각보다 간단한데 효용이 컸을 것 같음. chatGPT 시대에 이런거 하나는 진짜 10분이면 만든다.
2. patch-package로도 가능함.

# 캐시를 날리는 것에 대해 느낀 점

React Native 개발을 하면서 느낀 점은, 캐시 날리는게 생각보다 여러 상황에서 이런 저런 문제들을 해결해준다는 점이다.

상황별로 캐시를 날리고 다시 시도하면 되는 경우가 더러 있음

- 새로운 라이브러리 추가하거나 뭔가 설정을 변경했을 때
- 각 네이티브 환경에서도 마찬가지
  - Xcode / Android Studio에서도 마찬가지로 캐시 날리고 다시 빌드하면 되는 경우가 있다.

### 오늘의 상황

RN 최신 버전에서 현재 사용하는 버전의 문제가 resolve되었는지 한 번 보고싶어서 최신 버전을 설치한 다음에 빌드를 해보려고 했음 → 안드 빌드가 안됨

→ 안드 스튜디오로 넘어와서 확인해보니 node 버전이 안맞는다고함

→ 아니 이런 그러면 노드 버전을 변경해서 해보자(처음에는 안드스튜디오 내의 터미널에서 nvm으로 변경해서 쓰려고 했는데 이렇게는 안되길래 nvm alias default 18.18.0 으로 전체적으로 default 버전을 변경해서 사용해봤음. 근데 안된다. 여전히 이슈가 계속 남아있어서 좀 찾아보니..)

→ File → Invalidate Cache를 선택해서 옵션을 다 선택한 후 다시 시도해보라고 해서 했더니 된다.!
→ 이놈의 캐싱….평상시에 도움이 되기도 하지만 발목을 잡는 경우도 더러있다.

→ 일단 뭔가 좀 삐리하다 싶으면 캐시를 날리고 다시 해보는게 좋다.

1. 캐시를 날리는 것이 필요한 상황들이 있다는 점을 경험적으로 인지하기
2. 캐시를 날리는 방법들에 대해서 알고 있기

yarn clean-build android 뭐 이런거 안되나? 이런 script로 뭔가 실행을 쫙 해서 그냥 build를 날릴수 있으면 좋을텐데…..
