# 선언적 코드

[선언적인 코드 작성하기](https://toss.tech/article/frontend-declarative-code)

선언적 코드란? `추상화 레벨이 높아진 코드`라고 본다고 한다.

```javascript
arraySum([1, 2, 3]);

// 함수 내부 구현은 아마 이런 형태일 것이다.
function arraySum(array) {
  let result = 0;

  for (const num of array) {
    result += num;
  }

  return result;
}
```

`arraySum`함수는

- 초기값이 0이고
- 배열의 각 원소를 순회하면서 결과를 더하는 작업을 추상화한다.

추상화라는 개념을 통해서 `arraySum`의 내부 구현 로직에 대해서 알 필요 없이, 추상화된 로직에만 집중해서 함수를 필요에 따라 사용할 수 있다.

```javascript
// for ... of 의 추상화 방식을 표현한 코드
const iterator = nums[Symbol.iterator]();

let step;

while (!(step = iterator.next()).done) {
  const num = step;
  /* 동작 ... */
}
```

## 좋은 선언적인 코드 작성하기

좋은 선언적인 코드의 기준은 무엇일까?

토스에서는 좋은 코드를 판단하는 제 1 원칙을 `수정하기 쉬운 코드`라고 생각한다고 한다.

왜? 요구사항은 빠르게 변하기 때문에 이에 기민하게 대응하는 것이 key 라고 생각하는 듯 하다.

이런 맥락에서 선언적인 코드도 수정하기 쉽게 작성하는 것이 필요하다.

```javascript
// 이 컴포넌트는 특정한 form을 하나의 컴포넌트로 추상화했다는 점에서 선언적인 컴포넌트이다.
<ClassRegisterForm onSumbmit={() => {}} />
// 수정하기 쉬운가?
// 이것을 판단하는 기준은 대부분의 경우 이 코드가 사용되는 상황 및 예측되는 변화이다.
// 이 컴포는트가 여러 군데서 동일하게 사용되는가?
// 그렇다면 하나를 개발해서 여러 군데서 사용하고, 변경이 생겨도 한 곳에서만 변경하면 되기 떄문에 수정을 빠르게 반영할 수 있다.

// 수정하기 어려운 상황은?
// 쓸 때마다 조금씩 디테일이 다르다면? 공통화가 오히려 복잡도 증가의 원인이 될 수 있다.
// 이 컴포넌트 안에서는 다시 또 여러 구현 로직이 조건 분기 처리되는 등 복잡하게 구현되고, 사용하는 인터페이스도 복잡해서 사용하는 것도 불편하다.
<ClassRegisterForm
  onSumbmit={() => {}}
  title=""
  showSecondaryButton={false}
  /* 기타 prop들.. */
/>

```

무조건 컴포넌트를 공통으로 빼서 추상화 하는 것이 아니라, 앞으로 어떻게 제품이 변하고 요구사항이 변화할지를 생각해서 처리하는 습관이 필요하다.

코드의 어떤 부분이 수정될 가능성이 높은지 판단하고, 예측한 범주에서는 용이하게 수정될 수 있도록 적절한 선언 레벨을 따르는 코드를 작성할 필요가 있다.
