# 하나의 서비스를 만든다고 할 때 필요한 기술들 및 서로의 상관관계.

내가 아직 정확하게 클라이언트 서버 DB 구조에서 어떤 기술이 어디에 해당되고 어떻게 서로 연결되는지도 정확하게 모르고 있다는 점이 자료조사할 때 방해가 되어서 공부가 필요함.

RN 프로젝트를 하나 진행한다고 했을 때를 가정해서 각 영역 별로 나눠서 한 번 공부하고 도식화 해보자.

각 영역들의 특성을 알아야지 내 프로젝트에 어떤 기술이 적합한지 선택할 수 있지 않을까.

## 서비스 구조

하나의 RN앱을 만든다고 할 때, 가장 전통적으로 떠올리는 구조는 `클라이언트 - 서버 - DB` 구조일 듯 하다.

이 구조의 전체적인 그림에 대해서 조금 이해해보자.

### Client - React Native

- UI: React Native 컴포넌트들을 사용해 유저 인터페이스를 모바일 디바이스에 표시한다.
- 상태관리: 어플리케이션이 구동되는 동안 필요한 상태를 관리한다. 상태에는 UI 관련된 상태도 있을 수 있고, 서버에서 fetch한 데이터를 관리하는 상태도 있을 수 있다.
- navigation: 서로 다른 화면 간 이동을 처리한다.
- API 요청: 서버에서 데이터를 요청하거나, 서버로 데이터를 전송한다.

### Server

- 웹서버: Nodejs 등으로 구성된 백엔드 서버. React Native 어플리케이션으로부터 전송된 요청을 처리한다.
- API 엔드포인트: 서버는 Client(RN)이 서버와 소통할 수 있도록 RESTful or GraphQL 엔드포인트를 외부에 노출시킨다.
- Authentication: 토큰이나 세션 등을 이용해 유저를 인증한다.
- Business Logic: 데이터 검증 처리 및 response 생성 등 비즈니스 로직을 처리한다.
- 외부 서비스와 결합: 서버는 다른 외부 서비스나 API와 소통하여 데이터를 fetch 하고 저장할 수 있다.

### Database

- PostgreSQL, MySQL, MongoDB, or Firebase Realtime Database/Cloud Firestore 와 같은 데이터베이스 시스템들은 어플리케이션 데이터를 저장하고 관리한다.
- 데이터 모델링: 데이터베이스 스키마는 데이터의 구조 및 데이터간 관계를 정의한다.
- ORM/ODM(optional): ORM / ODM 라이브러리들은 데이터베이스와 소통하는 기능을 제공하는 추상화 계층을 제공한다.

### Middleware and Services

앱에 필요한 기능에 따라서 적절한 미들웨어를 사용할 수 있다.

### External Services and Integrations

- PG 등 외부 서비스
- Push notification: Firebase Cloud Messaging 등 push notification
- Analytics Services: 사용자 상호작용과 앱 퍼포먼스 등을 측정하기 위한 도구 및 서비스

### Deployment and infrastructure

- 서버 배포: 서버 어플리케이션을 AWS와 같은 호스팅 provider에 배포.
- DB 배포: on-premise(자체적인 물리공간에 구축하는 형태) or MongoDB Atlas와 같은 클라우드 서비스를 활용한 데이터베이스 인프라 구축 및 관리
- Scaling: 트래픽 증가에 대비한 auto-scaling 처리
- 서버 퍼포먼스 모니터링 및 로그 기록: 다양한 도구를 활용해 기록.

## 느낀점

각 레이어를 나눠서 생각하다보면 복잡해 보이지만, 간략하게 생각해볼 수도 있었다.

뭐가 존재한다 그래서 그렇게 따라서 해야겠다 라는 식으로 생각하다보면 계속 어려워질 수 밖에 없는 것 같다.

애초에 왜 이런 구조들이 생성되었는지, 각 역할들이 왜 생겨났는지 기원을 생각하는 것이 더 이해하기 쉬운 접근 방식이지 않을까?

유저에게 뭔가를 보여줘야해. 그러니까 어떻게 보여줄까 고민하다가 RN같은 기술들이 생긴거고, 유저들이 제공한 데이터를 저장해서 가치를 제공해야되니까 유저 정보를 정형화해서 저장하고, 또 필요할 때 fetch할 수 있는 기능을 제공하는 저장소가 필요했겠지. 그래서 데이터베이스라는 것이 생겼을 것 같다.

그리고 유저가 UI를 통해서 간단하 작업만 하는게 아니라, 보다 복잡한 작업을 많이 수행하기 위해서 다양한 로직들이 필요하니까 이 로직들을 처리하고 요청을 처리하기 위한 주체가 필요하겠지? 이 역할을 백엔드가 수행하는 것이다.

그리고 앱을 만드는데서 그치지 않고, 유저의 반응을 살피고 데이터를 수집해야 올바른 방향으로 개선해나갈 수 있겠지? 그래서 tracking 툴이 필요한거고.

앱을 아무리 잘 만들었어도, 앱을 사람들에게 전달하지 못하면 아무 소용이 없지. 배포를 해야지 사람들에게 전달할 수 있다. 그러니까 배포를 위해 필요한 호스팅 서비스나 배포 메커니즘 관리 서비스가 존재하게 되었을 것 같다.

이렇게 뭔가 자연스럽게 필요에 의해서 기술이 생긴 것이지, 기술에 의해서 필요가 생긴게 아닐 것이기 때문에 어떤 필요에 의해서 기술이 생겨났고, 기술이 어떤 문제를 해결하는지 아는 것이 시작점이 되어야할 것 같다.

그리고 개인 프로젝트와 관련해서도, 내가 만들고자 하는 프로젝트가 어떤 문제를 해결하려고 하는지가 먼저 명확해야 한다. 그래야지 그 문제를 해결하기 위해서 어떤 기술들을 채택해야되는지 더 잘 판단할 수 있겠다.

# Layer의 의미

소프트웨어 아키텍처의 관점에서 `레이어`란 하나의 시스템의 구성 요소를 책임과 상호작용을 기준으로 서로 다른 기능적인 그룹이나 계층으로 분리한 구조의 한 단위를 말한다.

`레이어`개념을 통해서 하나의 어플리케이션을 모듈성, SoC(Separation of Concerns - 관심사 분리) 그리고 유지 보수 가능성이 높은 상태로 구축해나갈 수 있다.

각각의 `레이어`는 보통 특정한 기능을 캡슐화하고 있으며, 인접한 다른 레이어와 통제된 방식으로 상호작용한다.

소프트웨어 아키텍처에서 통상적으로 사용되는 레이어는 다음과 같다.

1. Presentation Layer

2. Business Logic Layer(or Service Layer)

3. Data Access Layer

4. Infrastructure Layer

5. Communication Layer (Optional)

각 레이어에 대해서 간략하게 알아보자.

## Presentation Layer

사용자에게 유저 인터페이스를 보여주고 유저의 상호작용을 처리하는 것이 이 레이어의 역할이다.

Presentation Layer는 UI를 업데이트하기 위한 데이터를 fetch 하기 위해 다른 레이어와 소통한다.

## Business Logic Layer (or Service Layer)

어플리케이션의 비즈니스 로직을 담고 있는 계층이다.

비즈니스 로직이란 시스템의 행동방식에 대한 규칙과 프로세스를 의미한다.

여기에는 데이터 검증, 데이터 처리 및 조작 등의 작업이 포함된다.

Business Logic Layer는 presentation layer 와 data access layer 간 상호작용을 조율한다.

## Data Access Layer

persistence layer라고도 함.

데이터 저장 시스템과 상호작용하여 CRUD 오퍼레이션을 처리하는 역할을 한다.

데이터 저장 및 회수 프로세스를 추상화하여 business logic layer 가 데이터에 접근할 수 있는 통일된 인터페이스를 제공한다.

## Infrastructure Layer

인프라 관련 기능을 제공하는 요소들로 구성된 레이어이다.

인프라 관련 기능이라 함은, 로그 기록, 캐싱, 보안 등 기능들을 말한다.

어플리케이션의 안정성, 확장성 그리고 성능을 관리하는 도구들을 포함한다.

## Communication Layer(Optional)

분산 시스템이나 클라이언트-서버 아키텍처에서 서로 다른 모듈 간 소통과 데이터 교환을 처리하기 위해 존재하는 레이어.

프로토콜, 메세지 형식 그리고 네트워킹 메커니즘 등을 포함한다.
